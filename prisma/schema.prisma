generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

//Personel section starts here

model Permissions {
  PID               String  @unique
  AccessToLibrary   Boolean @default(false)
  AccessToResturant Boolean @default(false)
  AccessToUser      Boolean @default(false)
  AccessToServer    Boolean @default(false)
  ID                Staff   @relation(fields: [PID], references: [PID])
}

model Staff {
  ID            Int             @id @default(autoincrement())
  PID           String          @unique
  FirstName     String
  LastName      String
  Email         String          @unique
  PhoneNumber   String          @unique
  isPersonal    Boolean         @default(false)
  Permissions   Permissions?
  Restaurant    Restaurant[]
  BorrowDetails BorrowDetails[]
}

model Students {
  ID          Int    @id @default(autoincrement())
  PID         String @unique
  FirstName   String
  LastName    String
  Email       String @unique
  PhoneNumber String @unique

  Restaurant    Restaurant[]
  BorrowDetails BorrowDetails[]
}

//Personel section ends here

// Library borrowing system section starts here
model Template {
  ID           BigInt   @id
  Name         String   @unique
  Price        Int
  Type         String
  Company      String
  RegisterDate DateTime

  Library Library? @relation("NameBookName")
}

model Library {
  NTI_s_ID     Int      @unique
  ItemName     String   @unique
  ISBN         BigInt   @id @unique
  Title        String   @unique
  Author       String
  Language     String
  Publisher    String
  Description  String
  Cover        String   @unique
  Pages        Int
  Publish_Date DateTime

  NameBookName Template @relation(fields: [ItemName], references: [Name], name: "NameBookName")
  TemplateID   Int?

  BorrowDetails BorrowDetails[]
}

model BorrowDetails {
  Student_ID String
  Staff_ID   String
  NTI_ID     Int      @unique
  Date       DateTime

  NTI_NTI_S      Library  @relation(fields: [NTI_ID], references: [NTI_s_ID])
  NTI_ID_Staff   Staff    @relation(fields: [Staff_ID], references: [PID])
  NTI_ID_Student Students @relation(fields: [Student_ID], references: [PID])
}

//Library borrowing system section ends here

//Restaurant system section starts here

model Restaurant {
  ID         Students @relation(fields: [PID], references: [ID])
  PID        Int      @unique
  isPersonal Staff?   @relation(fields: [staffID], references: [ID])

  HaveEaten Boolean
  staffID   Int?
}

model Login {
  UserName String @unique
  PassWord String
  PID      String @unique
}
